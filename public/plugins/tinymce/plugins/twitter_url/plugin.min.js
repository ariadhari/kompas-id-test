tinymce.PluginManager.add("twitter_url",(function(t,e){var i=HOST_URL +"/media/tinymce/social/twitter.png";t.on("init",(function(t){editor_id=t.target.id})),t.addButton("twitter_url",{text:!1,icon:!0,image:i,tooltip:"Embed Twitter",onclick:function(){t.windowManager.open({title:"Twitter URL",body:[{type:"textbox",size:40,height:"100px",name:"twitter",label:"Tweet Link"}],onsubmit:function(t){var e=t.data.twitter;$.ajax({url:"https://publish.twitter.com/oembed?maxwidth=840&maxheight=1000&url="+e,dataType:"jsonp",async:!1,success:function(t){console.log(t),tinyMCE.activeEditor.insertContent('<div class="div_border" contenteditable="false">'+t.html+"</div>")},error:function(t,e){var i="";i=0===t.status?"Not connect.\n Verify Network.":404==t.status?"Requested page not found. [404]":500==t.status?"Internal Server Error [500].":"parsererror"===e?"Requested JSON parse failed.":"timeout"===e?"Time out error.":"abort"===e?"Ajax request aborted.":"Uncaught Error.\n"+t.responseText,alert(i)}}),setTimeout((function(){iframe.contentWindow.twttr.widgets.load()}),1e3)}})}})}));